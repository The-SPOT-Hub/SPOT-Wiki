# JS101
## Problem 79: Variable Lookup Order

Where does JS look to find local variables *first* when we reference them?

<details>
<summary>Solution:</summary>

It looks in the current scope, e.g. in the current block or function scope. Then it keeps moving one scope outwards until it reaches the global scope.

This is called the **scope chain** or **lexical scoping**.

**Example:**

```js
let global = 'global';

function outer() {
  let outerVar = 'outer';
  
  function middle() {
    let middleVar = 'middle';
    
    function inner() {
      let innerVar = 'inner';
      
      console.log(innerVar);    // 1. Looks in inner scope first - found!
      console.log(middleVar);   // 2. Not in inner, looks in middle - found!
      console.log(outerVar);    // 3. Not in inner/middle, looks in outer - found!
      console.log(global);      // 4. Not in inner/middle/outer, looks in global - found!
    }
    
    inner();
  }
  
  middle();
}

outer();
```

**Lookup order:**
1. Current (most local) scope
2. Enclosing scope
3. Next enclosing scope
4. ... and so on ...
5. Global scope
6. If not found anywhere â†’ `ReferenceError`

**This is why shadowing works:**

```js
let name = 'outer';

function test() {
  let name = 'inner';  // Found in current scope
  console.log(name);   // 'inner' - search stops here, never looks outward
}
```

JavaScript stops searching as soon as it finds a matching variable name, which is why inner variables shadow outer ones.

</details>

---

[Previous](078.md) | [Next](080.md)

