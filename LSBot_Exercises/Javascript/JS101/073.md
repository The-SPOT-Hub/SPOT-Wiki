# JS101
## Problem 73: Function Parameters and Scope

What will this code output and why?

```js
function randomElement(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}

let greetings = ['hello', 'howdy'];
let names = ['homer', 'marge'];

function random_greeting(sentence) {
  let greeting = randomElement(greetings);
  let name = randomElement(names);
  sentence = greeting + ' ' + name;
}

let sentence = '';
random_greeting(sentence);
console.log(sentence);
```

### Bonus Questions
1. How many `sentence` variables exist in this code? How are they related?
2. Fix this code to output a random greeting on line 17.
3. After fixing the code, update it so that we don't ever repeat names or greetings. How should we handle running out of names/greetings?

<details>
<summary>Solution:</summary>

**Output:**
```
(empty string)
```

**Explanation:**

The issue is that `sentence` is a parameter in `random_greeting`, which makes it a local variable. When we pass `sentence` to the function on line 16, we're passing the value `''` (an empty string). Inside the function, the parameter `sentence` is reassigned to a greeting, but this only affects the local parameter, not the outer `sentence` variable. Strings are primitives, so they're passed by value, not by reference.

**Bonus Questions:**

1. Two `sentence` variables exist:
   - The outer `sentence` on line 15 (in the global scope)
   - The parameter `sentence` on line 9 (local to `random_greeting`)
   
   They're not related except that the outer one's value is passed to initialize the parameter. Changes to the parameter don't affect the outer variable.

2. Fix by returning the greeting:

```js
function random_greeting() {  // Remove parameter
  let greeting = randomElement(greetings);
  let name = randomElement(names);
  return greeting + ' ' + name;  // Return instead of reassign
}

let sentence = random_greeting();  // Capture return value
console.log(sentence);  // Now logs a random greeting
```

3. Track used values and handle depletion:

```js
function randomElement(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}

let greetings = ['hello', 'howdy', 'hi', 'hey'];
let names = ['homer', 'marge', 'bart', 'lisa'];
let usedGreetings = [];
let usedNames = [];

function random_greeting() {
  // Check if we've run out
  if (usedGreetings.length >= greetings.length || 
      usedNames.length >= names.length) {
    return "No more unique combinations available!";
    // Or: throw new Error("Out of greetings/names!");
    // Or: reset the used arrays
  }
  
  // Get unused greeting
  let greeting;
  do {
    greeting = randomElement(greetings);
  } while (usedGreetings.includes(greeting));
  usedGreetings.push(greeting);
  
  // Get unused name
  let name;
  do {
    name = randomElement(names);
  } while (usedNames.includes(name));
  usedNames.push(name);
  
  return greeting + ' ' + name;
}

console.log(random_greeting());
console.log(random_greeting());
```

Alternative approach using index tracking:
```js
let greetingIdx = 0;
let nameIdx = 0;

function random_greeting() {
  if (greetingIdx >= greetings.length || nameIdx >= names.length) {
    return "No more combinations!";
  }
  
  let result = greetings[greetingIdx] + ' ' + names[nameIdx];
  greetingIdx++;
  nameIdx++;
  return result;
}
```

</details>

---

[Previous](072.md) | [Next](074.md)

