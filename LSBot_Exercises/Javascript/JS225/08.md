# JS225
## Problem 8: Arrow Functions & this

The following factory function `createUser` is intended to create user objects. The `getDisplayName` method, however, is not working as expected and returns "undefined undefined". Explain why this happens and provide a corrected version of the `createUser` function.

```javascript
function createUser(firstName, lastName) {
  let user = {
    firstName: firstName,
    lastName: lastName,
    getDisplayName: () => {
      return `${this.firstName} ${this.lastName}`;
    }
  };
  return user;
}

let user1 = createUser('John', 'Doe');
console.log(user1.getDisplayName());
```

<details>
<summary>Solution:</summary>

**Problem:** Arrow functions do not have their own `this` binding. They lexically inherit `this` from the surrounding scope where they are defined. In this case, `getDisplayName` is defined inside the `createUser` function. The `this` within `createUser` refers to the global object (or undefined in strict mode), not the user object.

**Fix:** To fix this, you must use a regular function expression or method syntax. These types of functions get their `this` context from how they are called. When `user1.getDisplayName()` is invoked, `this` will correctly refer to `user1`.

**Corrected Code:**

```javascript
function createUser(firstName, lastName) {
  let user = {
    firstName: firstName,
    lastName: lastName,
    // Use method syntax
    getDisplayName() {
      return `${this.firstName} ${this.lastName}`;
    }
    /* OR use a function expression:
    getDisplayName: function() {
      return `${this.firstName} ${this.lastName}`;
    }
    */
  };
  return user;
}

let user1 = createUser('John', 'Doe');
console.log(user1.getDisplayName()); // => "John Doe"
```

</details>

---

[Previous](07.md) | [Next](09.md)