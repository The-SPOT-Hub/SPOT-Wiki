# JS235
## Problem 4: Debugging Fetch API

The following code tries to fetch a random dog image and display it on the page when a button is clicked. However, it's not working. Identify the bug and provide the corrected code.

## Examples:

```javascript
document.addEventListener('DOMContentLoaded', () => {
  const button = document.getElementById('fetch-dog');
  const container = document.getElementById('dog-container');

  button.addEventListener('click', () => {
    fetch('https://dog.ceo/api/breeds/image/random')
      .then(response => response.json) // This line has a bug
      .then(data => {
        const img = document.createElement('img');
        img.src = data.message;
        container.innerHTML = '';
        container.appendChild(img);
      });
  });
});
```

<details>
<summary>Solution:</summary>

The bug is on the line `response => response.json`. The `.json()` method on a Response object must be called as a function, `response.json()`, because it returns a promise that resolves with the parsed JSON data.

```javascript
document.addEventListener('DOMContentLoaded', () => {
  const button = document.getElementById('fetch-dog');
  const container = document.getElementById('dog-container');

  button.addEventListener('click', () => {
    fetch('https://dog.ceo/api/breeds/image/random')
      .then(response => response.json()) // Corrected line
      .then(data => {
        const img = document.createElement('img');
        img.src = data.message;
        img.alt = 'A random dog';
        container.innerHTML = '';
        container.appendChild(img);
      });
  });
});
```

</details>

---

[Previous](03.md) | [Next](05.md)