# JS175
## Problem 7: Validation with express-validator

Expand on the previous question. Use `express-validator` to add validation rules for the `listTitle` field. The title must be trimmed, cannot be empty, and must be between 1 and 100 characters long. If validation fails, re-render the form page (`new-list.pug`), displaying the error messages and preserving the user's input. If it succeeds, perform the redirect as before.

<details>
<summary>Solution:</summary>

```javascript
const { body, validationResult } = require('express-validator');

app.post('/lists/new',
  [
    body('listTitle')
      .trim()
      .isLength({ min: 1 })
      .withMessage('The list title is required.')
      .isLength({ max: 100 })
      .withMessage('List title must be between 1 and 100 characters.')
  ],
  (req, res) => {
    let errors = validationResult(req);
    if (!errors.isEmpty()) {
      errors.array().forEach(error => req.flash('error', error.msg));
      res.render('new-list', {
        flash: req.flash(),
        listTitle: req.body.listTitle,
      });
    } else {
      // Persist the new list
      req.flash('success', 'The list has been created.');
      res.redirect('/lists');
    }
  }
);
```

</details>

---

[Previous](06.md) | [Next](08.md)