# RB101
## Problem 93: Normalize User Info with Short-Circuiting

Write a method that, given user info that may be `nil`, populates any missing info using short-circuiting logic.

```ruby
def normalize(name, age, email)
  # ...
end

p normalize('Marcy', nil, nil)
# {:name=>"Marcy", :age=>"Unknown", :email=>"Unknown"}
p normalize(nil, nil, 'best.user@gmail.com')
# {:name=>"Jane Doe", :age=>"Unknown", :email=>"best.user@gmail.com"}
```

**Bonus Challenge:**

What happens if we pass in an empty string as the `name` or `email`? How might we improve our method to replace these with the defaults? What if we pass in a negative number for the `age`? Can you make these improvements while still using short-circuiting?

<details>
<summary>Solution:</summary>

**Basic solution:**

```ruby
def normalize(name, age, email)
  {
    name: name || "Jane Doe",
    age: age || "Unknown",
    email: email || "Unknown"
  }
end

p normalize('Marcy', nil, nil)
# => {:name=>"Marcy", :age=>"Unknown", :email=>"Unknown"}

p normalize(nil, nil, 'best.user@gmail.com')
# => {:name=>"Jane Doe", :age=>"Unknown", :email=>"best.user@gmail.com"}
```

**Bonus Challenge:**

The problem with empty strings: In Ruby, `""` is truthy, so `"" || "default"` returns `""`, not the default.

**Improved version:**

```ruby
def normalize(name, age, email)
  # Handle empty strings by checking if they're empty
  normalized_name = (name && name != '') ? name : "Jane Doe"
  normalized_email = (email && email != '') ? email : "Unknown"
  
  # Handle negative ages
  normalized_age = (age && age >= 0) ? age : "Unknown"
  
  {
    name: normalized_name,
    age: normalized_age,
    email: normalized_email
  }
end

# Test cases:
p normalize('Marcy', nil, nil)
# => {:name=>"Marcy", :age=>"Unknown", :email=>"Unknown"}

p normalize('', -5, '')
# => {:name=>"Jane Doe", :age=>"Unknown", :email=>"Unknown"}

p normalize('John', 0, 'john@email.com')
# => {:name=>"John", :age=>0, :email=>"john@email.com"}
```

**Using short-circuiting more:**

```ruby
def normalize(name, age, email)
  {
    name: (name && !name.empty? && name) || "Jane Doe",
    age: (age && age >= 0 && age) || "Unknown",
    email: (email && !email.empty? && email) || "Unknown"
  }
end
```

**How this works:**
- `name && !name.empty? && name`: Returns `name` if it exists and isn't empty, otherwise `false`/`nil`
- `(...) || "Jane Doe"`: If left side is falsy, return default

**Alternative using helper method:**

```ruby
def normalize(name, age, email)
  {
    name: default_if_blank(name, "Jane Doe"),
    age: default_if_invalid_age(age, "Unknown"),
    email: default_if_blank(email, "Unknown")
  }
end

def default_if_blank(value, default)
  value && value != '' ? value : default
end

def default_if_invalid_age(value, default)
  value && value >= 0 ? value : default
end
```

</details>

---

[Previous](092.md) | [Next](094.md)

