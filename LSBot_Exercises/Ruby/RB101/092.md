# RB101
## Problem 92: DRY Configuration Validation

How can we rewrite this code to be more DRY using knowledge of precedence and logical operators? Refer to the current invocations to understand the expected behavior.

```ruby
def validate_game_config(name, rounds, difficulty, use_defaults)
  if use_defaults
    puts "Welcome to Asteroid! Let's play!"
    return
  elsif name == ''
    puts "You need to fill in all fields!"
    return
  elsif rounds < 1
    puts "You need to fill in all fields!"
    return
  elsif difficulty == ''
    puts "You need to fill in all fields!"
    return
  else
    puts "Welcome to Asteroid! Let's play!"
  end
end

validate_game_config('Jack', 0, 'Hard', false)
validate_game_config('', 0, '', true)
validate_game_config('Jack', 3, 'Hard', false)
validate_game_config('Jack', 3, 'Hard', true)
```

**Bonus Questions:**
1. Write an alternative version with as few lines as possible. Is this better?
2. Make this method sturdier by throwing an error if the `name` and `difficulty` aren't strings.
3. Make the "Let's play!" message custom by including the given arguments in the output.

<details>
<summary>Solution:</summary>

**DRY version using logical operators:**

```ruby
def validate_game_config(name, rounds, difficulty, use_defaults)
  if use_defaults || (name != '' && rounds >= 1 && difficulty != '')
    puts "Welcome to Asteroid! Let's play!"
  else
    puts "You need to fill in all fields!"
  end
end

validate_game_config('Jack', 0, 'Hard', false)    # You need to fill in all fields!
validate_game_config('', 0, '', true)             # Welcome to Asteroid! Let's play!
validate_game_config('Jack', 3, 'Hard', false)    # Welcome to Asteroid! Let's play!
validate_game_config('Jack', 3, 'Hard', true)     # Welcome to Asteroid! Let's play!
```

This uses short-circuiting: if `use_defaults` is `true`, the entire condition is `true` and we don't check the other fields.

**Alternative versions (with tradeoffs):**

**Version 2: Using conditional expression:**
```ruby
def validate_game_config(name, rounds, difficulty, use_defaults)
  puts (if !use_defaults && (name == '' || rounds < 1 || difficulty == '')
          "You need to fill in all fields!"
        else
          "Welcome to Asteroid! Let's play!"
        end)
end
```

**Version 3: Ultra-compact (ternary):**
```ruby
def validate_game_config(name, rounds, difficulty, use_defaults)
  puts (!use_defaults && (name == '' || rounds < 1 || difficulty == '')) ? 
       "You need to fill in all fields!" : 
       "Welcome to Asteroid! Let's play!"
end
```

**Bonus Answers:**

**Bonus 1**: Most compact version:

```ruby
def validate_game_config(name, rounds, difficulty, use_defaults)
  puts (!use_defaults && (name == '' || rounds < 1 || difficulty == '')) ? "You need to fill in all fields!" : "Welcome to Asteroid! Let's play!"
end
```

This is more compact but less readable. The first DRY version strikes a better balance between conciseness and clarity.

**Bonus 2**: Adding type validation:

```ruby
def validate_game_config(name, rounds, difficulty, use_defaults)
  unless name.is_a?(String) && difficulty.is_a?(String)
    raise TypeError, "Name and difficulty must be strings!"
  end
  
  if use_defaults || (name != '' && rounds >= 1 && difficulty != '')
    puts "Welcome to Asteroid! Let's play!"
  else
    puts "You need to fill in all fields!"
  end
end
```

**Bonus 3**: Custom message with arguments:

```ruby
def validate_game_config(name, rounds, difficulty, use_defaults)
  if use_defaults || (name != '' && rounds >= 1 && difficulty != '')
    if use_defaults
      puts "Welcome to Asteroid! Let's play!"
    else
      puts "Welcome to Asteroid, #{name}! You'll play #{rounds} rounds at #{difficulty} difficulty. Let's play!"
    end
  else
    puts "You need to fill in all fields!"
  end
end
```

Or using a ternary:
```ruby
def validate_game_config(name, rounds, difficulty, use_defaults)
  if use_defaults || (name != '' && rounds >= 1 && difficulty != '')
    message = use_defaults ? 
              "Welcome to Asteroid! Let's play!" : 
              "Welcome, #{name}! #{rounds} rounds at #{difficulty} difficulty. Let's play!"
    puts message
  else
    puts "You need to fill in all fields!"
  end
end
```

</details>

---

[Previous](091.md) | [Next](093.md)

