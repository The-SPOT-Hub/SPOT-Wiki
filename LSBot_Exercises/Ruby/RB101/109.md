# RB101
## Problem 109: Method Scope with Arrays

What will this code output and why?

```ruby
greetings = ['hello', 'howdy']
names = ['homer', 'marge']
  
def random_greeting(name)
  name = name.capitalize
  greeting = greetings.sample
  p greeting + ' ' + name
end
  
name = names.sample
random_greeting(name)
```

**Bonus Questions:**
1. How many `name` variables exist in this code? How are they related?
2. Fix this code.
3. After fixing the code, update it so that we don't ever repeat names or greetings. How should we handle running out of names/greetings?

<details>
<summary>Solution:</summary>

**What happens:**

This code raises a `NameError` on line 6.

```
NameError: undefined local variable or method `greetings'
```

**Why:**

The method `random_greeting` tries to access the `greetings` array on line 6, but `greetings` is a local variable in the main scope and is not accessible inside the method definition. Methods cannot access local variables from outside their definition.

**Bonus Answers:**

**Bonus 1**: Two `name` variables exist:
1. The local variable `name` in the main scope (line 10)
2. The parameter `name` in the method (line 4)

They are not related - they're separate variables that happen to have the same name. The main scope `name` is passed as an argument to the method, and the method parameter receives a reference to the same object.

**Bonus 2**: Fix by passing `greetings` as an argument:

```ruby
greetings = ['hello', 'howdy']
names = ['homer', 'marge']
  
def random_greeting(name, greetings)
  name = name.capitalize
  greeting = greetings.sample
  "#{greeting} #{name}"
end
  
name = names.sample
p random_greeting(name, greetings)
```

Or make `greetings` a constant:
```ruby
GREETINGS = ['hello', 'howdy']
names = ['homer', 'marge']
  
def random_greeting(name)
  name = name.capitalize
  greeting = GREETINGS.sample
  "#{greeting} #{name}"
end
  
name = names.sample
p random_greeting(name)
```

**Bonus 3**: No repeating names or greetings:

```ruby
GREETINGS = ['hello', 'howdy', 'hi', 'hey']
NAMES = ['homer', 'marge', 'bart', 'lisa']

greetings_copy = GREETINGS.dup
names_copy = NAMES.dup

def random_greeting(name, greetings_arr)
  return "Out of greetings!" if greetings_arr.empty?
  
  name = name.capitalize
  greeting = greetings_arr.delete(greetings_arr.sample)
  "#{greeting} #{name}"
end

until names_copy.empty? || greetings_copy.empty?
  name = names_copy.delete(names_copy.sample)
  puts random_greeting(name, greetings_copy)
end

# Handle running out:
if names_copy.empty? && !greetings_copy.empty?
  puts "Out of names!"
elsif greetings_copy.empty? && !names_copy.empty?
  puts "Out of greetings!"
end
```

Or using shift for sequential (not random):
```ruby
greetings = ['hello', 'howdy', 'hi', 'hey']
names = ['homer', 'marge', 'bart', 'lisa']

def random_greeting(name, greetings_arr)
  return "Out of greetings!" if greetings_arr.empty?
  
  greeting = greetings_arr.shift
  "#{greeting} #{name.capitalize}"
end

names.each do |name|
  break if greetings.empty?
  puts random_greeting(name, greetings)
end
```

</details>

---

[Previous](108.md) | [Next](110.md)

