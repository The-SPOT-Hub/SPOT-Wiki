# RB130
## Problem 4: Variable Scope Bug Fix

The following code is intended to select all the even numbers from an array. However, it returns the original array instead of the array of even numbers. Identify the bug and provide the corrected code.

```ruby
def select_evens(numbers)
  evens = []
  numbers.each do |number|
    evens << number if number.even?
  end
end

arr = [1, 2, 3, 4, 5, 6]
p select_evens(arr) # Expected: [2, 4, 6], Actual: [1, 2, 3, 4, 5, 6]
```

<details>
<summary>Solution:</summary>

The bug is that the `select_evens` method has no explicit return value. In Ruby, a method without an explicit `return` will implicitly return the value of the last expression evaluated. In this case, the last expression is `numbers.each`, which always returns the original array it was called on.

The fix is to add `evens` as the last line of the method to ensure the new array is returned.

```ruby
def select_evens(numbers)
  evens = []
  numbers.each do |number|
    evens << number if number.even?
  end
  evens # Explicitly return the `evens` array
end

arr = [1, 2, 3, 4, 5, 6]
p select_evens(arr) # => [2, 4, 6]
```

</details>

---

[Previous](03.md) | [Next](05.md)