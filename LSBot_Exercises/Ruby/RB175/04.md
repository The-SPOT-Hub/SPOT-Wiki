# RB175
## Problem 4: Using Sessions for State

Write a Sinatra route pair that shows a form for adding a contact and handles submission, storing contacts in the session under `:contacts`.

<details>
<summary>Solution:</summary>

```ruby
require "sinatra"

enable :sessions

get "/contacts/new" do
  <<~HTML
    <form method="post" action="/contacts">
      <input name="name" placeholder="Name">
      <input name="phone" placeholder="Phone">
      <input name="email" placeholder="Email">
      <button type="submit">Add</button>
    </form>
  HTML
end

post "/contacts" do
  session[:contacts] ||= []
  contact = {
    "name" => params["name"],
    "phone" => params["phone"],
    "email" => params["email"]
  }
  session[:contacts] << contact
  redirect "/contacts"
end

get "/contacts" do
  (session[:contacts] || []).map { |c| "#{c["name"]} (#{c["email"]})" }.join("<br>")
end
```

</details>

---

[Previous](03.md) | [Next](05.md)