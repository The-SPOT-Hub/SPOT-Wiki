# RB175
## Problem 5: Simple Validation and Error Display

Update the POST /contacts route to reject blank names and return a 422 status with an error message.

```ruby
require "sinatra"

enable :sessions

get "/contacts/new" do
  <<~HTML
    <form method="post" action="/contacts">
      <input name="name" placeholder="Name">
      <input name="phone" placeholder="Phone">
      <input name="email" placeholder="Email">
      <button type="submit">Add</button>
    </form>
  HTML
end

post "/contacts" do
  session[:contacts] ||= []
  contact = {
    "name" => params["name"],
    "phone" => params["phone"],
    "email" => params["email"]
  }
  session[:contacts] << contact
  redirect "/contacts"
end

get "/contacts" do
  (session[:contacts] || []).map { |c| "#{c["name"]} (#{c["email"]})" }.join("<br>")
end
```

<details>
<summary>Solution:</summary>

```ruby
post "/contacts" do
  name = params["name"].to_s.strip
  if name.empty?
    status 422
    return "Name must not be empty"
  end

  session[:contacts] ||= []
  session[:contacts] << {
    "name" => name,
    "phone" => params["phone"].to_s.strip,
    "email" => params["email"].to_s.strip
  }
  redirect "/contacts"
end
```

</details>

---

[Previous](04.md) | [Next](06.md)