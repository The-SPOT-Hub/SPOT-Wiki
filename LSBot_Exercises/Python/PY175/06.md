# PY175
## Problem 6: Session Management

Implement a simple "add to list" feature using the session. The root route (`/`) should display a form and the current list of items. When the form is submitted via POST, the new item should be added to a list in the session, and the user should be redirected back to the root page to see the updated list.

<details>
<summary>Solution:</summary>

```python
from flask import Flask, render_template, request, redirect, url_for, session

app = Flask(__name__)
app.secret_key = 'a_very_secret_key'

# Assumes a template named 'list.html' exists with a form and a loop to display items.
"""
<!-- list.html -->
<!DOCTYPE html>
<html>
<head>
    <title>My List</title>
</head>
<body>
    <h1>Items</h1>
    <ul>
        {% for item in items %}
            <li>{{ item }}</li>
        {% endfor %}
    </ul>
    <form method="post" action="/">
        <input type="text" name="item_name" required>
        <button type="submit">Add Item</button>
    </form>
</body>
</html>
"""

@app.route('/', methods=['GET', 'POST'])
def manage_list():
    if 'items' not in session:
        session['items'] = []

    if request.method == 'POST':
        new_item = request.form['item_name']
        # To avoid mutating session directly, create a copy, append, and reassign
        current_items = session['items']
        current_items.append(new_item)
        session['items'] = current_items
        return redirect(url_for('manage_list'))

    return render_template('list.html', items=session.get('items', []))

if __name__ == '__main__':
    app.run(debug=True)
```

</details>

---

[Previous](05.md) | [Next](07.md)