<p align="right">
  <a id="spot-launch-btn" class="spot-editor-link" href="https://launchschool.com/the-spot?url=https://github.com/The-SPOT-Hub/SPOT-Wiki/blob/main/LSBot_Exercises/Python/PY101/109.md" target="_blank">
  <img src="https://img.shields.io/badge/Work%20in%20LS%20Code%20Editor-555?style=flat&logo=data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZyBmaWxsPSIjZjM1YjVhIj48cGF0aCBkPSJNOTgsMS45Yy0yLjUtMi41LTYuNi0yLjUtOS4xLDBMMjcuMiw2My43Yy0yLjUsMi41LTIuNSw2LjYsMCw5LjFjMi41LDIuNSw2LjYsMi41LDkuMSwwTDk4LDExLjFDMTAwLjYsOC41LDEwMC41LDQuNSw5OCwxLjl6Ii8%2BPHBhdGggZD0iTTg4LjksNzQuOWwtMTQsMTRjLTIuNSwyLjUtMi41LDYuNiwwLDkuMWMyLjUsMi41LDYuNiwyLjUsOS4xLDBsMTQtMTRjMi41LTIuNSwyLjUtNi42LDAtOS4xQzk1LjUsNzIuNCw5MS40LDcyLjQsODguOSw3NC45eiIvPjxwYXRoIGQ9Ik05OC4xLDM4LjRjLTIuNS0yLjUtNi42LTIuNS05LjEsMEw2Mi43LDY0LjZjLTIuNSwyLjUtMi41LDYuNiwwLDkuMWMyLjUsMi41LDYuNiwyLjUsOS4xLDBsMjYuMy0yNi4zQzEwMC42LDQ1LDEwMC42LDQwLjksOTguMSwzOC40eiIvPjxwYXRoIGQ9Ik0yNSwyYy0yLjUtMi41LTYuNi0yLjUtOS4xLDBsLTE0LDE0Yy0yLjUsMi41LTIuNSw2LjYsMCw5LjFjMi41LDIuNSw2LjYsMi41LDkuMSwwbDE0LTE0QzI3LjYsOC42LDI3LjYsNC41LDI1LDJ6Ii8%2BPHBhdGggZD0iTTM1LjQsMzcuM0w2MS42LDExYzIuNS0yLjUsMi41LTYuNiwwLTkuMWMtMi41LTIuNS02LjYtMi41LTkuMSwwTDI2LjIsMjguMmMtMi41LDIuNS0yLjUsNi42LDAsOS4xQzI4LjgsMzkuOCwzMi44LDM5LjgsMzUuNCwzNy4zeiIvPjwvZz48L3N2Zz4%3D" alt="Work in LS Code Editor">
</a>
</p>

# PY101
## Problem 109: Nested Function Scope Access

What will be output when we run this code? What is being demonstrated by this snippet?

```python
def kaleidoscope():
    outer = 'Blue'
    def another():
        middle = 'Red'
        def another_again():
            inner = 'Green'
    
        another_again()
        print(outer)
        print(middle)
        print(inner)
    another()

kaleidoscope()
```

**Bonus Questions:**
1. How many scopes exist in this code, and where is each variable accessible?
2. Where could we move our `print` statements to be able to see all colors printed?
3. How could we change this code so that we see our colors printed *without* moving the `print` statements or eliminating nested functions?

<details>
<summary>Solution:</summary>

Output:
```
Blue
Red
NameError: name 'inner' is not defined
```

This demonstrates that variables defined outside of a function are accessible within that function, but variables defined within a function aren't available outside of that function.

The function `another` can access `outer` from `kaleidoscope` and its own `middle`, but it cannot access `inner` which is defined inside `another_again`.

**Bonus Answers:**

**Bonus 1**: Four scopes exist:

1. **Global scope**: No variables (empty in this example)
2. **`kaleidoscope` scope**: `outer` is accessible
3. **`another` scope**: `outer` and `middle` are accessible
4. **`another_again` scope**: `outer`, `middle`, and `inner` are all accessible

Variable accessibility:
- `outer` (defined in `kaleidoscope`): accessible in `kaleidoscope`, `another`, and `another_again`
- `middle` (defined in `another`): accessible in `another` and `another_again`
- `inner` (defined in `another_again`): accessible only in `another_again`

**Bonus 2**: The innermost scope of `another_again`:

```python
def kaleidoscope():
    outer = 'Blue'
    def another():
        middle = 'Red'
        def another_again():
            inner = 'Green'
            print(outer)   # All three are accessible here
            print(middle)
            print(inner)
    
        another_again()
    another()

kaleidoscope()
# Blue
# Red
# Green
```

**Bonus 3**: Use `nonlocal` to make `inner` accessible in the enclosing scope:

```python
def kaleidoscope():
    outer = 'Blue'
    def another():
        middle = 'Red'
        inner = None  # Declare in this scope
        
        def another_again():
            nonlocal inner  # Modify the one in another's scope
            inner = 'Green'
    
        another_again()
        print(outer)
        print(middle)
        print(inner)  # Now this works!
    another()

kaleidoscope()
# Blue
# Red
# Green
```

Or use `global` (though this is less appropriate):
```python
def kaleidoscope():
    outer = 'Blue'
    def another():
        middle = 'Red'
        def another_again():
            global inner  # Make it global
            inner = 'Green'
    
        another_again()
        print(outer)
        print(middle)
        print(inner)  # Accessible as global
    another()

kaleidoscope()
```

</details>

---

[Previous](108.md) | [Next](110.md)

