# PY101
## Problem 94: Counter Increment Error

We expect our counter to be incremented and printed three times by this code. That isn't what happens, why?

```python
counter = 0

def increment_counter():
    counter += 1
    print(f"Counter is now: {counter}")

increment_counter()
increment_counter()
increment_counter()
```

**Bonus Questions:**
1. How come we could print `counter` but we can't use `+=`? How can we fix this?
2. After fixing this code, is it possible to have multiple different counters? What if I want to have two counters keeping track of different counts?
3. Could you come up with a solution that would allow us to have multiple counters?

<details>
<summary>Solution:</summary>

We get an error: `UnboundLocalError: cannot access local variable 'counter' where it is not associated with a value`

**Explanation:**

Python sees `counter += 1` and recognizes that `+=` is an attempt to modify a variable. Because of this assignment, Python assumes `counter` is a local variable. However, the local variable hasn't been initialized before we try to read from it (the `+=` operation needs to read the current value first), so we get an `UnboundLocalError`.

**Bonus Answers:**

**Bonus 1**: When we tried to `print(counter)` (in other examples), we were only reading the variable, not modifying it. Reading doesn't require `global`. But `+=` needs to both read and write, which triggers Python to treat it as local.

Fix using `global`:
```python
counter = 0

def increment_counter():
    global counter  # Declare we're modifying the global counter
    counter += 1
    print(f"Counter is now: {counter}")

increment_counter()  # Counter is now: 1
increment_counter()  # Counter is now: 2
increment_counter()  # Counter is now: 3
```

**Bonus 2**: No, we cannot have multiple counters with this approach. Any use of `global counter` will modify the same global `counter` variable.

**Bonus 3**: We could use different approaches:

Option 1: Pass counters as arguments and return them:
```python
def increment_counter(counter):
    counter += 1
    print(f"Counter is now: {counter}")
    return counter

counter1 = 0
counter2 = 0

counter1 = increment_counter(counter1)  # Counter is now: 1
counter2 = increment_counter(counter2)  # Counter is now: 1
counter1 = increment_counter(counter1)  # Counter is now: 2
```

Option 2: Use a dictionary to manage multiple counters:
```python
counters = {}

def increment_counter(name):
    global counters
    if name not in counters:
        counters[name] = 0
    counters[name] += 1
    print(f"{name} is now: {counters[name]}")

increment_counter("first")   # first is now: 1
increment_counter("second")  # second is now: 1
increment_counter("first")   # first is now: 2
```

Option 3: Use a class (more advanced):
```python
class Counter:
    def __init__(self):
        self.value = 0
    
    def increment(self):
        self.value += 1
        print(f"Counter is now: {self.value}")

counter1 = Counter()
counter2 = Counter()
counter1.increment()  # Counter is now: 1
counter2.increment()  # Counter is now: 1
counter1.increment()  # Counter is now: 2
```

</details>

---

[Previous](93.md) | [Next](95.md)

